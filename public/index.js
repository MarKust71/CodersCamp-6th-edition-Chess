(()=>{var t={7:(t,e,n)=>{var i=n(286);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},645:t=>{var e=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)},57:(t,e,n)=>{t.exports=!n(253)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},457:(t,e,n)=>{var i=n(286),s=n(816).document,c=i(s)&&i(s.createElement);t.exports=function(t){return c?s.createElement(t):{}}},253:t=>{t.exports=function(t){try{return!!t()}catch(t){return!0}}},218:(t,e,n)=>{"use strict";var i=n(7);t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},18:(t,e,n)=>{t.exports=n(825)("native-function-to-string",Function.toString)},816:t=>{var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},181:t=>{var e={}.hasOwnProperty;t.exports=function(t,n){return e.call(t,n)}},728:(t,e,n)=>{var i=n(275),s=n(681);t.exports=n(57)?function(t,e,n){return i.f(t,e,s(1,n))}:function(t,e,n){return t[e]=n,t}},734:(t,e,n)=>{t.exports=!n(57)&&!n(253)((function(){return 7!=Object.defineProperty(n(457)("div"),"a",{get:function(){return 7}}).a}))},286:t=>{t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},461:t=>{t.exports=!1},275:(t,e,n)=>{var i=n(7),s=n(734),c=n(689),o=Object.defineProperty;e.f=n(57)?Object.defineProperty:function(t,e,n){if(i(t),e=c(e,!0),i(n),s)try{return o(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},681:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},234:(t,e,n)=>{var i=n(816),s=n(728),c=n(181),o=n(953)("src"),a=n(18),r="toString",h=(""+a).split(r);n(645).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,a){var r="function"==typeof n;r&&(c(n,"name")||s(n,"name",e)),t[e]!==n&&(r&&(c(n,o)||s(n,o,t[e]?""+t[e]:h.join(String(e)))),t===i?t[e]=n:a?t[e]?t[e]=n:s(t,e,n):(delete t[e],s(t,e,n)))})(Function.prototype,r,(function(){return"function"==typeof this&&this[o]||a.call(this)}))},825:(t,e,n)=>{var i=n(645),s=n(816),c="__core-js_shared__",o=s[c]||(s[c]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n(461)?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})},689:(t,e,n)=>{var i=n(286);t.exports=function(t,e){if(!i(t))return t;var n,s;if(e&&"function"==typeof(n=t.toString)&&!i(s=n.call(t)))return s;if("function"==typeof(n=t.valueOf)&&!i(s=n.call(t)))return s;if(!e&&"function"==typeof(n=t.toString)&&!i(s=n.call(t)))return s;throw TypeError("Can't convert object to primitive value")}},953:t=>{var e=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+n).toString(36))}},774:(t,e,n)=>{n(57)&&"g"!=/./g.flags&&n(275).f(RegExp.prototype,"flags",{configurable:!0,get:n(218)})},108:(t,e,n)=>{"use strict";n(774);var i=n(7),s=n(218),c=n(57),o="toString",a=/./.toString,r=function(t){n(234)(RegExp.prototype,o,t,!0)};n(253)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?r((function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!c&&t instanceof RegExp?s.call(t):void 0)})):a.name!=o&&r((function(){return a.call(this)}))}},e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={exports:{}};return t[i](s,s.exports,n),s.exports}(()=>{"use strict";const t={history:[],whoseTurn(){return this.history.length%2==0?"white":"black"},newMove(t){this.history.push(t)},undoMove(){},playFromTheStart(){}};class e{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.piece=t,this.coords=e,this.check=i,this.checkMate=s,this.special=n}}const i=t,s=class{constructor(t,e,n){this.x=t,this.y=e,this.side=n,this.hasMoved=!1}move(n){const s=Number(n[0]),c=Number(n[2]),o=this.findKing("white"===this.side?"black":"white"),a=new e({side:this.side,name:this.name},{origin:[this.x,this.y],destination:[s,c]});if(this.hasMoved=!0,"king"===this.name&&Math.abs(this.y-c)>1){const t=p[s][this.y<c?7:0],e=6===c?c-1:c+1;this.castle(t,e),a.special={type:e<4?"castle long":"castle short",coords:{origin:[t.x,t.y],destination:[s,e]}}}p[this.x][this.y]=null,document.getElementById("".concat(this.x,",").concat(this.y)).innerHTML="",this.x=s,this.y=c,p[this.x][this.y]=this,document.getElementById(n).innerHTML=this.display,a.check=o.underCheck(),t.newMove(a),a.check&&!o.hasAnyAvailableMove()&&(t.history[t.history.length-1].checkMate=!0,(()=>{const t=document.createElement("div"),e=document.createElement("div"),n=document.createElement("p"),s=document.createElement("button");t.append(e),e.append(n),e.append(s),t.classList.add("checkmate-box-wrapper"),e.classList.add("checkmate-box"),s.classList.add("startGameButton"),n.textContent="".concat(i.history[i.history.length-1].piece.side," is a winner!"),s.textContent="New game",s.addEventListener("click",(function(){const t=document.createElement("div"),e=document.getElementById("wrapper");t.setAttribute("id","board"),e.innerHTML="",e.append(t),i.history=[],u(),w()})),document.getElementById("wrapper").append(t)})())}promote(){}findLegalMoves(){}pieceOnSquare(t,e){return!(!p[t]||!p[t][e])&&p[t][e]}hasLineMovement(){return["queen","rook","bishop"].includes(this.name)}findKing(t){for(const e of p)for(const n of e)if(n&&"king"===n.name&&n.side===t)return n}},c=class extends s{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2?arguments[2]:void 0;super(t,e,n),this.validateInput(t,e,n),this.name="king",this.display='<i class="fas fa-chess-king '.concat(n,'"></i>'),-1==t||-1==e?(this.x="white"===n?7:0,this.y=4):(this.x=parseInt(t),this.y=parseInt(e))}findLegalMoves(){let t=[];const e=i.whoseTurn()===this.side;for(let n=-1;n<=1;n++){let i=this.x+n>=0&&this.x+n<8?this.x+n:void 0;for(let n=-1;n<=1;n++){let s=this.y+n>=0&&this.y+n<8?this.y+n:void 0;if("number"==typeof i&&"number"==typeof s){let n=this.pieceOnSquare(i,s),c=!e||this.isSafe(i,s);n?n.side!==this.side&&c&&t.push("".concat(i,",").concat(s)):c&&t.push("".concat(i,",").concat(s))}}}return t=e?[...t,...this.detectCastle()]:t,t}isSafe(t,e){const n="white"===this.side?"black":"white",i=p[t][e];let s=!0;p[this.x][this.y]=void 0,i&&(p[t][e]=void 0);t:for(const i of p)for(const c of i)if(c&&c.side===n)if("pawn"===c.name){const n="white"===c.side?-1:1;if(t===c.x+n&&(c.y+1===e||c.y-1===e)){s=!1;break t}}else{const n=c.findLegalMoves();if(n.length>0)for(const i of n)if(i[0]==t&&i[2]==e){s=!1;break t}}return p[this.x][this.y]=this,i&&(p[t][e]=i),s}moveEndangerKing(t,e,n){p[t.x][t.y]=void 0;const i=p[e][n];p[e][n]=t;const s=!this.isSafe(this.x,this.y);return p[t.x][t.y]=t,p[e][n]=i,s}underCheck(){return!this.isSafe(this.x,this.y)}validateInput(t,e,n){if(t<-1||t>7)throw"x is out of range.";if(e<-1||e>7)throw"y is out of range.";if("white"!==n&&"black"!==n)throw"Wrong value of parameter side: ".concat(n)}detectCastle(){const t=[],e=function(t){const e=[];for(let n of p)for(let i of n)i&&i.side===t.side&&"rook"===i.name&&!i.hasMoved&&e.push(i);return e}(this);if(!this.isSafe(this.x,this.y)||this.hasMoved)return[];for(let i=0;i<e.length;i++)e[i]&&n(e[i],this)&&t.push("".concat(this.x,",").concat(this.y>e[i].y?this.y-2:this.y+2));return t;function n(t,e){const n=t.y<e.y?-1:1;let i=e.y+n;for(;i!==t.y;){if(e.pieceOnSquare(e.x,i)&&e.isSafe(e.x,i))return!1;i+=n}return!0}}hasAnyAvailableMove(){for(const t of p)for(const e of t)if(e&&e.side===this.side&&e.findLegalMoves().length>0)return!0;return!1}castle(t,e){p[t.x][t.y]=null,document.getElementById("".concat(t.x,",").concat(t.y)).innerHTML="",t.x=this.x,t.y=e,p[t.x][t.y]=t,document.getElementById("".concat(t.x,",").concat(t.y)).innerHTML=t.display}},o=class extends s{constructor(t,e,n){super(t,e,n),this.name="queen",this.display='<i class="fas fa-chess-queen '.concat(n,'"></i>'),-1===t||-1===e?(this.x="white"===n?7:0,this.y=3):(this.x=parseInt(t),this.y=parseInt(e))}findLegalMoves(){const t=[];return[[1,0],[-1,0],[0,1],[0,-1],[1,1],[1,-1],[-1,1],[-1,-1]].map((e=>{this.checkLine(e[0],e[1],t)})),t}checkLine(t,e,n){for(let i=1;i<8;i++){let s=this.x+t*i,c=this.y+e*i;if(!(s>=0&&s<8&&c>=0&&c<8))break;if(0!=this.getSquareStatus(s,c)){if(2==this.getSquareStatus(s,c)){n.push("".concat(s,",").concat(c));break}break}n.push("".concat(s,",").concat(c))}}getSquareStatus(t,e){let n=0,i=this.pieceOnSquare(t,e);return i&&(n=i.side===this.side?1:2),n}},a=class extends s{constructor(t,e,n){super(t,e,n),this.name="bishop",this.display='<i class="fas fa-chess-bishop '.concat(n,'"></i>')}findLegalMoves(){const t=[];for(let e=1;e<=7;e++)if(this.x+e<=7&&this.y+e<=7){if(p[this.x+e][this.y+e]){p[this.x+e][this.y+e].side!==this.side&&t.push("".concat(this.x+e,",").concat(this.y+e));break}t.push("".concat(this.x+e,",").concat(this.y+e))}for(let e=1;e<=7;e++)if(this.x+e<=7&&this.y-e>=0){if(p[this.x+e][this.y-e]){p[this.x+e][this.y-e].side!==this.side&&t.push("".concat(this.x+e,",").concat(this.y-e));break}t.push("".concat(this.x+e,",").concat(this.y-e))}for(let e=1;e<=7;e++)if(this.x-e>=0&&this.y+e<=7){if(p[this.x-e][this.y+e]){p[this.x-e][this.y+e].side!==this.side&&t.push("".concat(this.x-e,",").concat(this.y+e));break}t.push("".concat(this.x-e,",").concat(this.y+e))}for(let e=1;e<=7;e++)if(this.x-e>=0&&this.y-e>=0){if(p[this.x-e][this.y-e]){p[this.x-e][this.y-e].side!==this.side&&t.push("".concat(this.x-e,",").concat(this.y-e));break}t.push("".concat(this.x-e,",").concat(this.y-e))}return t}},r=class extends s{constructor(t,e,n){super(t,e,n),this.name="knight",this.display='<i class="fas fa-chess-knight '.concat(n,'"></i>')}findLegalMoves(){const t=[];return[[-2,-1],[-2,1],[2,1],[2,-1],[-1,-2],[-1,2],[1,2],[1,-2]].map((e=>{this.x+e[0]>-1&&this.x+e[0]<8&&this.y+e[1]>-1&&this.y+e[1]<8&&(p[this.x+e[0]][this.y+e[1]]?this.side!==p[this.x+e[0]][this.y+e[1]].side&&t.push("".concat(this.x+e[0],",").concat(this.y+e[1])):t.push("".concat(this.x+e[0],",").concat(this.y+e[1])))})),t}},h=class extends s{constructor(t,e,n){super(t,e,n),this.name="rook",this.display='<i class="fas fa-chess-rook '.concat(n,'"></i>')}findLegalMoves(){const t=[];for(let e=1;e<=7;e++)if(this.x+e<=7){if(p[this.x+e][this.y]){p[this.x+e][this.y].side!==this.side&&t.push("".concat(this.x+e,",").concat(this.y));break}t.push("".concat(this.x+e,",").concat(this.y))}for(let e=1;e<=7;e++)if(this.x-e>=0){if(p[this.x-e][this.y]){p[this.x-e][this.y].side!==this.side&&t.push("".concat(this.x-e,",").concat(this.y));break}t.push("".concat(this.x-e,",").concat(this.y))}for(let e=1;e<=7;e++)if(this.y+e<=7){if(p[this.x][this.y+e]){p[this.x][this.y+e].side!==this.side&&t.push("".concat(this.x,",").concat(this.y+e));break}t.push("".concat(this.x,",").concat(this.y+e))}for(let e=1;e<=7;e++)if(this.y-e>=0){if(p[this.x][this.y-e]){p[this.x][this.y-e].side!==this.side&&t.push("".concat(this.x,",").concat(this.y-e));break}t.push("".concat(this.x,",").concat(this.y-e))}return t}validateInput(t,e,n){if(t<-1||t>7)throw"x is out of range.";if(e<-1||e>7)throw"y is out of range.";if("white"!==n&&"black"!==n)throw"Wrong value of parameter side: ".concat(n)}},d=class extends s{constructor(t,e,n,i){super(t,e,n,i),this.name="pawn",this.display='<i class="fas fa-chess-pawn '.concat(n,'"></i>'),this.direction="white"===this.side?-1:1}findLegalMoves(){const e=this.x,n=this.y,i=this.direction,s=[],c=this.pieceOnSquare("".concat(e+i),"".concat(n)),o=this.pieceOnSquare("".concat(e+i),"".concat(n-1)),a=this.pieceOnSquare("".concat(e+i),"".concat(n+1)),r=this.pieceOnSquare("".concat(e+2*i),"".concat(n)),h=this.pieceOnSquare("".concat(e+i),"".concat(n)),d="".concat(e+2*i,",").concat(n),l="".concat(e+i,",").concat(n),u="".concat(e+i,",").concat(n-1),p="".concat(e+i,",").concat(n+1),m=this.findKing(this.side),f=t.whoseTurn()===this.side,y=t=>!f||!m.moveEndangerKing(this,t[0],t[2]);return c||h||(this.x===("white"===this.side?6:1)?r?y(l)&&s.push(l):(y(l)&&s.push(l),y(d)&&s.push(d)):this.x!==("white"===this.side?0:7)&&y(l)&&s.push(l)),a&&this.side!==a.side&&y(p)&&s.push(p),o&&this.side!==o.side&&y(u)&&s.push(u),s}promote(){const t=["queen","rook","knight","bishop"],e=this.x,n=this.y,i=this.side,s=document.getElementById("wrapper"),c=document.createElement("div"),d=document.createElement("div");function l(t){let l;switch(t.target.id){case"bishop":l=new a(e,n,i);break;case"queen":l=new o(e,n,i);break;case"knight":l=new r(e,n,i);break;case"rook":l=new h(e,n,i)}p[e][n]=l,document.querySelector('[id="'.concat(e,",").concat(n,'"]')).innerHTML=l.display,s.removeChild(c),s.removeChild(d)}if(e===("white"===i?0:7)){c.className="promoChoice",s.appendChild(c);const e=document.createTextNode("Pick promoted figure:"),n=document.createElement("div");n.className="promoText",n.appendChild(e),c.appendChild(n),d.className="promoCover",s.appendChild(d);const o=document.createElement("ul");o.className="promoChoiceList",c.appendChild(o);for(const e of t){const t=document.createElement("li");t.classList="promoChoiceItem",o.appendChild(t);const n=document.createElement("i");n.className="fas fa-chess-".concat(e," ").concat(i),n.id="".concat(e),t.appendChild(n),n.addEventListener("click",(t=>{l(t)}))}}}enPassant(){}},l=new Array(8);for(let t=0;t<8;t++)l[t]=new Array(8);function u(){for(let t=0;t<l.height;t++)for(let e=0;e<l.width;e++)l[t][e]=null;for(let t=0;t<8;t++)l[6][t]=new d(6,t,"white"),l[1][t]=new d(1,t,"black");l[7][4]=new c(7,4,"white"),l[0][4]=new c(0,4,"black"),l[7][3]=new o(-1,-1,"white"),l[0][3]=new o(-1,-1,"black"),l[7][0]=new h(7,0,"white"),l[7][7]=new h(7,7,"white"),l[0][0]=new h(0,0,"black"),l[0][7]=new h(0,7,"black"),l[7][1]=new r(7,1,"white"),l[7][6]=new r(7,6,"white"),l[0][1]=new r(0,1,"black"),l[0][6]=new r(0,6,"black"),l[0][2]=new a(0,2,"black"),l[0][5]=new a(0,5,"black"),l[7][2]=new a(7,2,"white"),l[7][5]=new a(7,5,"white")}l.width=l.length,l.height=l.length,u();const p=l;n(108);const m=function(){let t=300;const e=i.whoseTurn(),n=document.getElementById("wrapper"),s=document.createElement("div");s.className="startSetupBox";const c=document.createElement("div");c.className="startCover",n.appendChild(c);const o=document.createTextNode("Chose start options:"),a=document.createElement("div");a.className="setupBoxTitle",a.appendChild(o),s.appendChild(a);const r=[1,3,5,8],h=["1 minute","3 minutes","5 minutes","8 minutes"],d=document.createElement("div");d.id="playTimeForm";const l=document.createTextNode("Round time:  "),u=document.createElement("div");u.appendChild(l),d.appendChild(u);const p=document.createElement("select");p.id="playTimeSelect",s.appendChild(d),d.appendChild(p);for(let t=0;t<h.length;t++){const e=document.createElement("option");e.value=t.toString(),e.text=h[t],p.appendChild(e)}const m=document.createElement("input");return m.setAttribute("type","submit"),m.className="startGameButton",m.value="Start game",s.appendChild(m),n.appendChild(s),m.addEventListener("click",(()=>{t=60*r[document.getElementById("playTimeSelect").value],f(document.getElementById("whitePlayerTimer"),t),f(document.getElementById("blackPlayerTimer"),t),n.removeChild(s),n.removeChild(c),y.runFirstTimer(e,t)})),{clockTimer:t}}(),f=(t,e)=>{t.innerHTML=(t=>{let e,n=Math.floor(t/60),i=t%60;return e=i>=10?"0".concat(n,":").concat(i):"0".concat(n,":0").concat(i),e})(e)},y=function(){let t,e,n,i;const s=()=>{i="white"===t?setInterval((()=>{n--,f(document.getElementById("whitePlayerTimer"),n)}),1e3):setInterval((()=>{e--,f(document.getElementById("blackPlayerTimer"),e)}),1e3)};return{runFirstTimer:(i,c)=>{t=i,e=c,n=c,s()},setOpponentsTimer:()=>{clearInterval(i),t="white"===t?"black":"white",s()}}}();let x=[];const g=t=>{const e="possibleMove",n=t.currentTarget.id[0],s=t.currentTarget.id[2];if(!p[n][s]||i.whoseTurn()!==p[n][s].side)return 0;for(let t of x){const n=document.getElementById(t);n.classList.remove(e);let i=n.cloneNode(!0);n.parentNode.replaceChild(i,n)}x=p[n][s].findLegalMoves();for(let t of x)document.getElementById(t).classList.add(e),document.getElementById(t).addEventListener("click",c);function c(t){p[n][s].move(t.currentTarget.id),p[t.currentTarget.id[0]][t.currentTarget.id[2]].promote();for(let t=0;t<p.width;t++)for(let n=0;n<p.height;n++){document.getElementById("".concat(t,",").concat(n)).classList.remove(e);let i=document.getElementById("".concat(t,",").concat(n)),s=i.cloneNode(!0);i.parentNode.replaceChild(s,i),document.getElementById("".concat(t,",").concat(n)).addEventListener("click",o)}y.setOpponentsTimer()}function o(t){g(t)}},v=g,w=()=>{for(let t=0;t<p.length;t++)for(let e=0;e<p[t].length;e++){const n=document.createElement("div");n.id="".concat(t,",").concat(e),n.innerHTML=p[t][e]?p[t][e].display:"",n.className="square",n.className+=t%2==e%2?" light":" dark",n.addEventListener("click",(t=>{v(t)})),document.getElementById("board").appendChild(n)}(()=>{const t=document.getElementById("wrapper"),e=document.createElement("div");e.id="gameplaySidebar",t.appendChild(e);const n=document.createElement("div");n.className="blackPlayerTimerContainer";const i=document.createElement("div");i.className="blackPlayerTimer",i.id="blackPlayerTimer",f(i,m.clockTimer),n.appendChild(i),e.appendChild(n);const s=document.createElement("div");s.className="gameHistoryRecording";const c=document.createElement("ol");c.className="recordingListMoves";const o=document.createTextNode("history");c.appendChild(o),s.appendChild(c),e.appendChild(s);const a=document.createElement("div");a.className="whitePlayerTimerContainer";const r=document.createElement("div");r.className="whitePlayerTimer",r.id="whitePlayerTimer",f(r,m.clockTimer),a.appendChild(r),e.appendChild(a)})()};window.onload=w})()})();